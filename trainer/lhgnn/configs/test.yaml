# configs/test.yaml

# @package _global_
defaults:
  - _self_
  - data: spoken
  - model: LHGNN
  - callbacks: default
  - logger: tensorboard
  - trainer: default
  - paths: default
  - extras: default
  - hydra: default
  - experiment: null

# 任务名称
task_name: "test-spoken"

# 标签
tags: ["test"]

# 训练控制 - 设置为 false 确保不进行训练
train: false

# 测试相关配置
eval: true
test: true

# 是否使用加权平均模型
wa: false

# 检查点路径（可选）
ckpt_path: "/opt/pytorch_lightning/lightning_logs/train-spoken/runs/2025-12-01_10-35-06/checkpoints/last.ckpt"
# 示例:
# ckpt_path: "/path/to/checkpoint.ckpt"

# 预训练权重路径（可选）
pretrain_path: null
# 示例:
# pretrain_path: "/path/to/pretrained_weights.pth"

# 随机种子
seed: 42

# 训练器配置覆盖（针对测试优化）
trainer:
  _target_: pytorch_lightning.Trainer
  max_epochs: 1  # 测试时只需要1个epoch
  check_val_every_n_epoch: 1
  log_every_n_steps: 50
  accelerator: auto
  devices: 1
  num_nodes: 1
  precision: 32-true
  enable_progress_bar: true
  enable_model_summary: true
  deterministic: false
  benchmark: true

# 回调函数配置（针对测试优化）
callbacks:
  model_checkpoint:
    _target_: pytorch_lightning.callbacks.ModelCheckpoint
    dirpath: ${paths.output_dir}/checkpoints
    filename: "test-{epoch:02d}-{val_loss:.2f}"
    monitor: "val_loss"
    mode: "min"
    save_last: true
    save_top_k: 1
    every_n_epochs: 1
    save_weights_only: false

# 日志配置
logger:
  _target_: pytorch_lightning.loggers.TensorBoardLogger
  save_dir: ${paths.log_dir}
  name: ${task_name}
  version: "test"
  default_hp_metric: false